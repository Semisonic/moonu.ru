/* DoubleTrackBar.js */
function cDoubleTrackBar(a,b,c){switch(typeof a){case "string":this.Track=document.getElementById(a);break;case "object":this.Track=a}switch(typeof b){case "string":this.Tracker=document.getElementById(b);break;case "object":this.Tracker=b}if(!a||!b)return!1;this.OnUpdate=c.OnUpdate;this.OnComplete=c.OnComplete;this.FingerOffset=c.FingerOffset||0;this.FormatNumbers=c.FormatNumbers||!1;this.Min=c.Min||0;this.Max=c.Max||100;this.MinSpace=c.MinSpace||0;this.RoundTo=c.RoundTo||1;this.Margins=c.Margins||
0;this.AllowedValues=c.AllowedValues||!1;this.Disabled="undefined"!=typeof c.Disabled?c.Disabled:!1;this.Min>=this.Max&&(this.Max=this.Min+1);this.MinPos=this.Min;this.MaxPos=this.Max;this.Max-this.Min<this.MinSpace&&(this.MinSpace=this.Max-this.Min);this.Max-this.Min<this.RoundTo&&(this.RoundTo=this.Max-this.Min);this.MinSpace=Math.ceil(this.MinSpace/this.RoundTo)*this.RoundTo;this.Track.style.width=(this.Track.clientWidth||this.Track.offsetWidth)+"px";this.OnTrackMouseDown=this.bindAsEventListener(this.TrackMouseDown);
this.OnDocumentMouseMove=this.bindAsEventListener(this.DocumentMouseMove);this.OnDocumentMouseUp=this.bindAsEventListener(this.DocumentMouseUp);this.bindEvent(this.Track,"mousedown",this.OnTrackMouseDown);this.TrackerLeft=0;this.UpdateTracker(this.Track.offsetWidth+this.FingerOffset);"function"==typeof this.OnUpdate&&this.OnUpdate.call(this)}
cDoubleTrackBar.prototype={TrackMouseDown:function(a){this.TrackerLeft=this.Tracker.offsetLeft-this.Margins;this.TrackerRight=this.TrackerLeft+this.Tracker.offsetWidth;this.TrackerOffsets=this.getOffsets(this.Track);var b=a.clientX+document.documentElement.scrollLeft,b=b-this.TrackerOffsets[0];this.Left=Math.abs(this.TrackerLeft-b+this.Margins)<=Math.abs(this.TrackerRight-b+this.Margins);if("function"==typeof this.Disabled){if(this.Disabled.call(this))return!0}else if(this.Disabled)return!0;this.UpdateTracker(b);
this.bindEvent(document,"mousemove",this.OnDocumentMouseMove);this.bindEvent(document,"mouseup",this.OnDocumentMouseUp);return this.stopEvent(a)},DocumentMouseMove:function(a){this.UpdateTracker(a.clientX+document.documentElement.scrollLeft-this.TrackerOffsets[0]);return this.stopEvent(a)},DocumentMouseUp:function(a){this.unbindEvent(document,"mousemove",this.OnDocumentMouseMove);this.unbindEvent(document,"mouseup",this.OnDocumentMouseUp);"function"==typeof this.OnComplete&&this.OnComplete.call(this);
return this.stopEvent(a)},UpdateTracker:function(a){var b=this.Track.offsetWidth-2*this.Margins-1,c=Math.floor(b*this.MinSpace/(this.Max-this.Min)),d=this.MinPos,e=this.MaxPos,a=a-this.Margins;this.Left?(a+=this.FingerOffset,this.TrackerLeft=Math.max(0,Math.min(this.TrackerRight-c-1,a)),this.MinPos=Math.round((this.Min+this.TrackerLeft*(this.Max-this.Min)/b)/this.RoundTo)*this.RoundTo,this.MinSpace>=this.MaxPos-this.MinPos&&(this.MinPos=this.MaxPos-this.MinSpace),this.AllowedValues&&(this.TrackerLeft=
Math.round(b*(this.MinPos-this.Min)/(this.Max-this.Min)))):(a-=this.FingerOffset,this.TrackerRight=Math.max(this.TrackerLeft+c+1,Math.min(b+1,a)),this.MaxPos=Math.round((this.Min+(this.TrackerRight-1)*(this.Max-this.Min)/b)/this.RoundTo)*this.RoundTo,this.MinSpace>=this.MaxPos-this.MinPos&&(this.MaxPos=this.MinPos+this.MinSpace),this.AllowedValues&&(this.TrackerRight=Math.round(b*(this.MaxPos-this.Min)/(this.Max-this.Min))+1));this.Tracker.style.width=this.TrackerRight-this.TrackerLeft+"px";this.Tracker.style.left=
this.Margins+this.TrackerLeft+"px";"function"==typeof this.OnUpdate&&(!this.AllowedValues||this.AllowedValues&&(e!=this.MaxPos||d!=this.MinPos))&&this.OnUpdate.call(this)},AddHairline:function(a){var b=this.Track.appendChild(document.createElement("div"));b.style.left=this.Margins+(this.Track.offsetWidth-2*this.Margins-1)/(this.Max-this.Min)*(a-this.Min)+"px";b.className="touch";b.innerHTML="<span>"+(this.FormatNumbers?this.leadSpaces(a):a)+"</span>"},AutoHairline:function(a){1<=a&&this.AddHairline(this.Min);
2<=a&&this.AddHairline(this.Max);if(3<=a){a--;var b=this.Max-this.Min,c=[10,20,50,100,250,500,1E3,2E3,5E3,1E4,2E4,5E4,1E5,25E4,5E5,1E6],d=1,e=0;for(e;c[e]&&!(d=c[e]/10,c[e]>b);e++);e=1;for(e;e<a;e++)c=this.Min+b/a*e,c=Math.round(c/d)*d,this.AddHairline(c)}},getOffsets:function(a){var b=0,c=0;do b+=a.offsetTop||0,c+=a.offsetLeft||0,a=a.offsetParent;while(a);return[c,b]},leadSpaces:function(a){var b="",a=a.toString(),c=a.length,d=c;for(d;0<d;d--)b=2==(c-d)%3?"&nbsp;"+a.charAt(d-1)+b:a.charAt(d-1)+b;
return b},bindEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},unbindEvent:function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},bindAsEventListener:function(a){var b=this;return function(c){return a.call(b,c||window.event)}},stopEvent:function(a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.returnValue=!1,a.cancelBubble=!0);return!1}};

/* jquery.tipsy.js */
(function(b){function i(a,c){this.$element=b(a);this.options=c;this.enabled=!0;this.fixTitle()}i.prototype={show:function(){var a=this.getTitle();if(a&&this.enabled){var c=this.tip();c.find(".tipsy-inner")[this.options.html?"html":"text"](a);c[0].className="tipsy";c.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var a=b.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),d=c[0].offsetWidth,f=c[0].offsetHeight,
e="function"==typeof this.options.gravity?this.options.gravity.call(this.$element[0]):this.options.gravity,g;switch(e.charAt(0)){case "n":g={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-d/2};break;case "s":g={top:a.top-f-this.options.offset,left:a.left+a.width/2-d/2};break;case "e":g={top:a.top+a.height/2-f/2,left:a.left-d-this.options.offset};break;case "w":g={top:a.top+a.height/2-f/2,left:a.left+a.width+this.options.offset}}2==e.length&&(g.left="w"==e.charAt(1)?a.left+a.width/2-
15:a.left+a.width/2-d+15);c.css(g).addClass("tipsy-"+e);c.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+e.charAt(0);this.options.className&&c.addClass("function"==typeof this.options.className?this.options.className.call(this.$element[0]):this.options.className);this.options.fade?c.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):c.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){b(this).remove()}):
this.tip().remove()},fixTitle:function(){var a=this.$element;if(a.attr("title")||"string"!=typeof a.attr("original-title"))a.attr("original-title",a.attr("title")||"").removeAttr("title")},getTitle:function(){var a,b=this.$element,d=this.options;this.fixTitle();"string"==typeof d.title?a=b.attr("title"==d.title?"original-title":d.title):"function"==typeof d.title&&(a=d.title.call(b[0]));return(a=(""+a).replace(/(^\s*|\s*$)/,""))||d.fallback},tip:function(){this.$tip||(this.$tip=b('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'));
return this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.options=this.$element=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}};b.fn.tipsy=function(a){function c(c){var d=b.data(c,"tipsy");d||(d=new i(c,b.fn.tipsy.elementOptions(c,a)),b.data(c,"tipsy",d));return d}function d(){var b=c(this);b.hoverState="in";0===a.delayIn?b.show():(b.fixTitle(),setTimeout(function(){"in"==b.hoverState&&b.show()},
a.delayIn))}function f(){var b=c(this);b.hoverState="out";0===a.delayOut?b.hide():setTimeout(function(){"out"==b.hoverState&&b.hide()},a.delayOut)}if(!0===a)return this.data("tipsy");if("string"==typeof a){var e=this.data("tipsy");if(e)e[a]();return this}a=b.extend({},b.fn.tipsy.defaults,a);a.live||this.each(function(){c(this)});if("manual"!=a.trigger){var e=a.live?"live":"bind",g="hover"==a.trigger?"mouseleave":"blur";this[e]("hover"==a.trigger?"mouseenter":"focus",d)[e](g,f)}return this};b.fn.tipsy.defaults=
{className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:0.8,title:"title",trigger:"hover"};b.fn.tipsy.elementOptions=function(a,c){return b.metadata?b.extend({},c,b(a).metadata()):c};b.fn.tipsy.autoNS=function(){return b(this).offset().top>b(document).scrollTop()+b(window).height()/2?"s":"n"};b.fn.tipsy.autoWE=function(){return b(this).offset().left>b(document).scrollLeft()+b(window).width()/2?"e":"w"};b.fn.tipsy.autoBounds=function(a,c){return function(){var d=
c[0],f=1<c.length?c[1]:!1,e=b(document).scrollTop()+a,g=b(document).scrollLeft()+a,h=b(this);h.offset().top<e&&(d="n");h.offset().left<g&&(f="w");b(window).width()+b(document).scrollLeft()-h.offset().left<a&&(f="e");b(window).height()+b(document).scrollTop()-h.offset().top<a&&(d="s");return d+(f?f:"")}}})(jQuery);

/* tipsy.js */
pv.Behavior.tipsy=function(e){function d(){a&&($(a).tipsy("hide"),a.parentNode.removeChild(a),a=null)}var a;return function(){var b=pv.Transform.identity,c=this.parent;do b=b.translate(c.left(),c.top()).times(c.transform());while(c==c.parent);a||(c=this.root.canvas(),c.style.position="relative",$(c).mouseleave(d),a=c.appendChild(document.createElement("div")),a.style.position="absolute",a.style.pointerEvents="none",$(a).tipsy(e));a.title=this.title();this.properties.width?(a.style.width=Math.ceil(this.width()*
b.k)+1+"px",a.style.height=Math.ceil(this.height()*b.k)+1+"px"):this.properties.radius&&(c=this.radius(),b.x-=c,b.y-=c,a.style.height=a.style.width=Math.ceil(2*c*b.k)+"px");a.style.left=Math.floor(this.left()*b.k+b.x)+"px";a.style.top=Math.floor(this.top()*b.k+b.y)+"px";a.style.height&&$(pv.event.target).mouseleave(d);$(a).tipsy("show")}};
